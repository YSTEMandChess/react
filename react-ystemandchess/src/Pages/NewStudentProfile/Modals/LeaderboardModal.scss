/* src/Pages/NewStudentProfile/Modals/LeaderboardModal.scss */
/* Fit table inside modal, no horizontal scroll, equal tight gutters */

$green: #82c341;
$yellow: #e9df6e;
$panel-tint: #e5f3d2;
$row: #bad33b;
$row-alt: #c4da58;
$text: #151515;
$ink: #231f20;

/* modal/page gutters */
$gutter-left: 24px;
$gutter-right: 32px;

/* table-only gutters (tight) */
$table-gutter-left: 10px;
$table-gutter-right: 10px;

.lb-headbar { display: none !important; }

/* ===== Modal shell ===== */
.modal-overlay {
  position: fixed; inset: 0;
  display: flex; justify-content: center; align-items: center;
  background: rgba(0,0,0,.25); z-index: 999;
}
.modal-content {
  width: min(920px, 92vw);
  max-height: 80vh;
  overflow-y: auto;
  overflow-x: hidden; /* stop page-level x scroll */
  background: $panel-tint;
  border-radius: 16px;
  padding: 24px 16px 12px;
  position: relative;
  box-shadow: 0 8px 30px rgba(0,0,0,.25);
}
.close-button {
  position: absolute; top: 8px; right: 8px; width: 40px; height: 40px;
  display: inline-flex; align-items: center; justify-content: center;
  font-size: 1.75rem; background: none; border: none; color: red; font-weight: 800; cursor: pointer; z-index: 2;
}

/* ===== Header (smaller, flush, no overlap) ===== */
.lb-header { position: relative; height: 64px; margin: 0 0 12px; padding-right: 64px; margin-left: $gutter-left; margin-right: $gutter-right; }
.lb-heading { height: 64px; display: flex; align-items: stretch; gap: 0; }
.lb-heading > * { margin: 0; }
.lb-backpill {
  flex: 0 0 64px; width: 64px; height: 64px; border: 0; border-radius: 10px 0 0 10px;
  background: $yellow; display: flex; align-items: center; justify-content: center;
  font-size: 14px; font-weight: 700; color: $text; line-height: 1.1;
}
.lb-title {
  flex: 1 1 auto; height: 64px; margin-left: -1px; border-radius: 0 10px 10px 0;
  background: $green; color: $text; display: flex; align-items: center; justify-content: center;
  padding: 0 16px; font-family: "Lato", system-ui, sans-serif; font-weight: 800; font-size: clamp(20px, 2.2vw, 26px);
}
.lb-crown-img { position: absolute; right: 24px; top: 50%; transform: translateY(-50%); width: 36px; }

/* ===== Filters ===== */
.lb-filters, .lb-table-wrap, .lb-loadmore { width: 100%; }
.lb-filters {
  margin-left: $gutter-left; margin-right: $gutter-right;
  display: flex; justify-content: center; align-items: center; flex-wrap: wrap;
  gap: 16px; padding: 16px 0; margin-top: 8px; margin-bottom: 12px;
  select {
    appearance: none; width: 200px; min-height: 40px; padding: 8px 36px 8px 10px;
    font: 16px/1.25 "Roboto", system-ui, sans-serif; color: $ink;
    background: #fff; border: 2px solid $ink; border-radius: 6px;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path d='M5 7l5 6 5-6' fill='none' stroke='%23231F20' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'/></svg>");
    background-repeat: no-repeat; background-size: 14px; background-position: right 10px center;
  }
}

/* ===== Table wrapper â€” NO width calc, boxed, tight gutters ===== */
.lb-table-wrap {
  /* column sizing */
  --col-rank: clamp(54px, 7.5vw, 80px);
  --col-score: clamp(82px, 11vw, 104px);
  --cols-available: calc(100% - var(--col-rank) - var(--col-score));
  --col-name:  calc(var(--cols-available) * 0.20);  /* tighter Name */
  --col-school:calc(var(--cols-available) * 0.80);

  box-sizing: border-box;
  width: 100%;                      /* inherit container width */
  max-width: calc(100% - (#{$table-gutter-left} + #{$table-gutter-right}));
  margin-left: $table-gutter-left;  /* tight left gutter */
  margin-right: $table-gutter-right;/* tight right gutter */

  background: $row; border-radius: 24px; padding: 12px;
  box-shadow: inset 0 2px 6px rgba(0,0,0,.08);

  overflow-y: auto;
  overflow-x: hidden;               /* kill x-scroll */
  max-height: calc(80vh - 64px - 40px - 70px);
  /* remove extra right-side reserve that created a visual gap */
  scrollbar-gutter: auto;
}

/* ===== Table ===== */
.lb-table {
  width: 100%; max-width: 100%;
  border-collapse: separate; border-spacing: 0; table-layout: fixed;
  background: transparent; color: $text;
}
.lb-table colgroup .col-rank   { width: var(--col-rank); }
.lb-table colgroup .col-name   { width: var(--col-name); min-width: 96px; }
.lb-table colgroup .col-school { width: var(--col-school); }
.lb-table colgroup .col-score  { width: var(--col-score); }

/* sticky header */
.lb-table thead th {
  position: sticky; top: 0; z-index: 3;
  background: #ead94c; color: #231f20;
  font-family: "Lato", system-ui, sans-serif; font-size: 17px; font-weight: 800;
  padding: 8px 10px; text-align: left; box-shadow: 0 2px 0 #cbbf42; background-clip: padding-box;
}
.lb-table thead th:nth-child(1), .lb-table thead th:nth-child(4) { text-align: center; }

/* sort button */
.lb-sort-btn { background: none; border: 0; padding: 0; margin: 0; display: inline-flex; align-items: center; gap: 8px; cursor: pointer; color: inherit; font: inherit; }
.lb-sort-icon { width: 16px; height: 10px; display: block; transition: transform .18s ease; }
.lb-sort-icon.asc { transform: rotate(180deg); }
.lb-sort-icon path { stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; fill: none; }

/* rows */
.lb-table tbody tr { background: $row; }
.lb-table tbody tr:nth-child(even) { background: $row-alt; }
.lb-table tbody td {
  padding: 8px 10px;
  vertical-align: middle;
  font-family: "Poppins", system-ui, sans-serif;
  font-size: 15px;
  font-weight: 500;
  line-height: 1.25;
  color: $text;
  border-top: 1px solid #91a725;
}
.lb-table tbody tr:first-child td { border-top: none; }

/* nowrap Rank/Score; wrap Name/School to avoid overflow */
.lb-table tbody td:nth-child(1),
.lb-table tbody td:nth-child(4) { text-align: center; white-space: nowrap; }
.lb-table tbody td:nth-child(2),
.lb-table tbody td:nth-child(3) { white-space: normal; overflow-wrap: anywhere; word-break: break-word; min-width: 0; }

/* visuals */
.lb-user { display: flex; align-items: center; gap: 10px; min-width: 0; }
.lb-rank-img { display: inline-block; width: 26px; height: 26px; background: no-repeat center/contain; }
.lb-rank-img.rank-1 { width: 28px; height: 28px; }
.lb-avatar { width: 26px; height: 26px; flex: 0 0 26px; border-radius: 50%; background: #222; box-shadow: inset 0 0 0 3px #ffe680; }
.lb-avatar.blue{ box-shadow: inset 0 0 0 3px #60a5fa; }
.lb-avatar.red { box-shadow: inset 0 0 0 3px #ef4444; }
.lb-avatar.teal{ box-shadow: inset 0 0 0 3px #14b8a6; }
.lb-avatar.gold{ box-shadow: inset 0 0 0 3px #facc15; }

/* emphasis */
.lb-table tbody tr[data-rank="1"] td,
.lb-table tbody tr[data-rank="2"] td,
.lb-table tbody tr[data-rank="3"] td { font-weight: 600; }

/* load more aligned with tight table gutters */
.lb-loadmore { display: flex; justify-content: center; margin: 12px $table-gutter-right 12px $table-gutter-left; }
.lb-load-btn { background: #f7d46a; border: none; padding: 8px 18px; border-radius: 18px; font-weight: 800; font-size: 14px; color: black; box-shadow: inset 0 2px 0 #e2b84f; cursor: pointer; }

/* ===== Small screens ===== */
@media (max-width: 640px) {
  $gl: 14px; $gr: 18px;

  .modal-content { width: 92vw; max-height: 78vh; padding: 20px 12px 12px; }

  .lb-header { height: 56px; padding-right: 52px; margin-left: $gl; margin-right: $gr; }
  .lb-heading { height: 56px; }
  .lb-backpill { width: 56px; height: 56px; font-size: 13px; border-radius: 8px 0 0 8px; }
  .lb-title { height: 56px; font-size: clamp(18px, 5vw, 22px); border-radius: 0 8px 8px 0; margin-left: -1px; }
  .lb-crown-img { right: 14px; width: 30px; }

  .lb-filters { margin-left: $gl; margin-right: $gr; }

  .lb-table-wrap {
    --col-rank: clamp(48px, 12vw, 68px);
    --col-score: clamp(76px, 22vw, 94px);
    --cols-available: calc(100% - var(--col-rank) - var(--col-score));
    --col-name:  calc(var(--cols-available) * 0.18);
    --col-school:calc(var(--cols-available) * 0.82);

    width: 100%;
    max-width: calc(100% - (#{$table-gutter-left} + #{$table-gutter-right}));
    margin-left: $table-gutter-left;
    margin-right: $table-gutter-right;

    padding: 10px;
    max-height: calc(78vh - 56px - 40px - 70px);
    overflow-x: hidden;
  }

  .lb-table thead th { font-size: 15px; padding: 7px 8px; }
  .lb-table tbody td { font-size: 14px; padding: 7px 8px; }
  .lb-avatar { width: 24px; height: 24px; }
  .lb-rank-img { width: 24px; height: 24px; }
}
